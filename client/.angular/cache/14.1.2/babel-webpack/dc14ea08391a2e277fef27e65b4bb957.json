{"ast":null,"code":"import { Injectable, InjectionToken, Component, ElementRef, Renderer2, HostListener, EventEmitter, Directive, ViewContainerRef, Optional, Inject, Input, Output, RendererFactory2, NgModule } from '@angular/core';\nimport { isBs3, Utils, document as document$1, window as window$1 } from 'ngx-bootstrap/utils';\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\nimport { FocusTrapModule } from 'ngx-bootstrap/focus-trap'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ngx-bootstrap/focus-trap';\nimport * as ɵngcc2 from 'ngx-bootstrap/component-loader';\nconst _c0 = [\"*\"];\n\nclass BsModalRef {\n  constructor() {\n    /**\n     * Hides the modal\n     */\n    this.hide = () => void 0;\n    /**\n     * Sets new class to modal window\n     */\n\n\n    this.setClass = () => void 0;\n  }\n\n}\n\nBsModalRef.ɵfac = function BsModalRef_Factory(t) {\n  return new (t || BsModalRef)();\n};\n\nBsModalRef.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: BsModalRef,\n  factory: BsModalRef.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BsModalRef, [{\n    type: Injectable\n  }], function () {\n    return [];\n  }, null);\n})();\n\nclass ModalBackdropOptions {\n  constructor(options) {\n    this.animate = true;\n    Object.assign(this, options);\n  }\n\n}\n\nclass ModalOptions {}\n\nModalOptions.ɵfac = function ModalOptions_Factory(t) {\n  return new (t || ModalOptions)();\n};\n\nModalOptions.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: ModalOptions,\n  factory: ModalOptions.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalOptions, [{\n    type: Injectable\n  }], null, null);\n})();\n\nconst modalConfigDefaults = {\n  backdrop: true,\n  keyboard: true,\n  focus: true,\n  show: false,\n  ignoreBackdropClick: false,\n  class: '',\n  animated: true,\n  initialState: {},\n  closeInterceptor: void 0\n};\nconst MODAL_CONFIG_DEFAULT_OVERRIDE = new InjectionToken('override-default-config');\nconst CLASS_NAME = {\n  SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n  BACKDROP: 'modal-backdrop',\n  OPEN: 'modal-open',\n  FADE: 'fade',\n  IN: 'in',\n  SHOW: 'show' // bs4\n\n};\nconst SELECTOR = {\n  DIALOG: '.modal-dialog',\n  DATA_TOGGLE: '[data-toggle=\"modal\"]',\n  DATA_DISMISS: '[data-dismiss=\"modal\"]',\n  FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\n};\nconst TRANSITION_DURATIONS = {\n  MODAL: 300,\n  BACKDROP: 150\n};\nconst DISMISS_REASONS = {\n  BACKRDOP: 'backdrop-click',\n  ESC: 'esc',\n  BACK: 'browser-back-navigation-clicked'\n};\n\nclass ModalContainerComponent {\n  constructor(options, _element, _renderer) {\n    this._element = _element;\n    this._renderer = _renderer;\n    this.isShown = false;\n    this.isAnimated = false;\n    this.isModalHiding = false;\n    this.clickStartedInContent = false;\n    this.config = Object.assign({}, options);\n  }\n\n  ngOnInit() {\n    if (this.isAnimated) {\n      this._renderer.addClass(this._element.nativeElement, CLASS_NAME.FADE);\n    }\n\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n\n    setTimeout(() => {\n      this.isShown = true;\n\n      this._renderer.addClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n    }, this.isAnimated ? TRANSITION_DURATIONS.BACKDROP : 0);\n\n    if (document && document.body) {\n      if (this.bsModalService && this.bsModalService.getModalsCount() === 1) {\n        this.bsModalService.checkScrollbar();\n        this.bsModalService.setScrollbar();\n      }\n\n      this._renderer.addClass(document.body, CLASS_NAME.OPEN);\n\n      this._renderer.setStyle(document.body, 'overflow-y', 'hidden');\n    }\n\n    if (this._element.nativeElement) {\n      this._element.nativeElement.focus();\n    }\n  }\n\n  onClickStarted(event) {\n    this.clickStartedInContent = event.target !== this._element.nativeElement;\n  }\n\n  onClickStop(event) {\n    var _a;\n\n    const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n\n    if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || !clickedInBackdrop) {\n      this.clickStartedInContent = false;\n      return;\n    }\n\n    (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACKRDOP);\n    this.hide();\n  }\n\n  onPopState() {\n    var _a;\n\n    (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACK);\n    this.hide();\n  }\n\n  onEsc(event) {\n    var _a, _b;\n\n    if (!this.isShown) {\n      return;\n    }\n\n    if (event.keyCode === 27 || event.key === 'Escape') {\n      event.preventDefault();\n    }\n\n    if (this.config.keyboard && this.level === ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount())) {\n      (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.setDismissReason(DISMISS_REASONS.ESC);\n      this.hide();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.isShown) {\n      this._hide();\n    }\n  }\n\n  hide() {\n    if (this.isModalHiding || !this.isShown) {\n      return;\n    }\n\n    if (this.config.closeInterceptor) {\n      this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n      return;\n    }\n\n    this._hide();\n  }\n\n  _hide() {\n    this.isModalHiding = true;\n\n    this._renderer.removeClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n\n    setTimeout(() => {\n      var _a, _b;\n\n      this.isShown = false;\n\n      if (document && document.body && ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount()) === 1) {\n        this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n\n        this._renderer.setStyle(document.body, 'overflow-y', '');\n      }\n\n      (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.hide(this.config.id);\n      this.isModalHiding = false;\n    }, this.isAnimated ? TRANSITION_DURATIONS.MODAL : 0);\n  }\n\n}\n\nModalContainerComponent.ɵfac = function ModalContainerComponent_Factory(t) {\n  return new (t || ModalContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ModalOptions), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n};\n\nModalContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ModalContainerComponent,\n  selectors: [[\"modal-container\"]],\n  hostAttrs: [\"role\", \"dialog\", \"tabindex\", \"-1\", 1, \"modal\"],\n  hostVars: 3,\n  hostBindings: function ModalContainerComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"mousedown\", function ModalContainerComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onClickStarted($event);\n      })(\"click\", function ModalContainerComponent_click_HostBindingHandler($event) {\n        return ctx.onClickStop($event);\n      })(\"popstate\", function ModalContainerComponent_popstate_HostBindingHandler() {\n        return ctx.onPopState();\n      }, false, ɵngcc0.ɵɵresolveWindow)(\"keydown.esc\", function ModalContainerComponent_keydown_esc_HostBindingHandler($event) {\n        return ctx.onEsc($event);\n      }, false, ɵngcc0.ɵɵresolveWindow);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵattribute(\"aria-modal\", true)(\"aria-labelledby\", ctx.config.ariaLabelledBy)(\"aria-describedby\", ctx.config.ariaDescribedby);\n    }\n  },\n  ngContentSelectors: _c0,\n  decls: 3,\n  vars: 2,\n  consts: [[\"role\", \"document\", \"focusTrap\", \"\"], [1, \"modal-content\"]],\n  template: function ModalContainerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵprojectionDef();\n      ɵngcc0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      ɵngcc0.ɵɵprojection(2);\n      ɵngcc0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassMap(\"modal-dialog\" + (ctx.config.class ? \" \" + ctx.config.class : \"\"));\n    }\n  },\n  dependencies: [ɵngcc1.FocusTrapDirective],\n  encapsulation: 2\n});\n\nModalContainerComponent.ctorParameters = () => [{\n  type: ModalOptions\n}, {\n  type: ElementRef\n}, {\n  type: Renderer2\n}];\n\nModalContainerComponent.propDecorators = {\n  onClickStarted: [{\n    type: HostListener,\n    args: ['mousedown', ['$event']]\n  }],\n  onClickStop: [{\n    type: HostListener,\n    args: ['click', ['$event']]\n  }],\n  onPopState: [{\n    type: HostListener,\n    args: ['window:popstate']\n  }],\n  onEsc: [{\n    type: HostListener,\n    args: ['window:keydown.esc', ['$event']]\n  }]\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalContainerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'modal-container',\n      template: `\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n      // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n      host: {\n        class: 'modal',\n        role: 'dialog',\n        tabindex: '-1',\n        '[attr.aria-modal]': 'true',\n        '[attr.aria-labelledby]': 'config.ariaLabelledBy',\n        '[attr.aria-describedby]': 'config.ariaDescribedby'\n      }\n    }]\n  }], function () {\n    return [{\n      type: ModalOptions\n    }, {\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ɵngcc0.Renderer2\n    }];\n  }, {\n    onClickStarted: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n    onClickStop: [{\n      type: HostListener,\n      args: ['click', ['$event']]\n    }],\n    onPopState: [{\n      type: HostListener,\n      args: ['window:popstate']\n    }],\n    onEsc: [{\n      type: HostListener,\n      args: ['window:keydown.esc', ['$event']]\n    }]\n  });\n})();\n/** This component will be added as background layout for modals if enabled */\n\n\nclass ModalBackdropComponent {\n  constructor(element, renderer) {\n    this._isAnimated = false;\n    this._isShown = false;\n    this.element = element;\n    this.renderer = renderer;\n  }\n\n  get isAnimated() {\n    return this._isAnimated;\n  }\n\n  set isAnimated(value) {\n    this._isAnimated = value;\n  }\n\n  get isShown() {\n    return this._isShown;\n  }\n\n  set isShown(value) {\n    this._isShown = value;\n\n    if (value) {\n      this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n    } else {\n      this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n    }\n\n    if (!isBs3()) {\n      if (value) {\n        this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n      } else {\n        this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n      }\n    }\n  }\n\n  ngOnInit() {\n    if (this.isAnimated) {\n      this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.FADE}`);\n      Utils.reflow(this.element.nativeElement);\n    }\n\n    this.isShown = true;\n  }\n\n}\n\nModalBackdropComponent.ɵfac = function ModalBackdropComponent_Factory(t) {\n  return new (t || ModalBackdropComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n};\n\nModalBackdropComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: ModalBackdropComponent,\n  selectors: [[\"bs-modal-backdrop\"]],\n  hostAttrs: [1, \"modal-backdrop\"],\n  decls: 0,\n  vars: 0,\n  template: function ModalBackdropComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\n\nModalBackdropComponent.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: Renderer2\n}];\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalBackdropComponent, [{\n    type: Component,\n    args: [{\n      selector: 'bs-modal-backdrop',\n      template: ' ',\n      // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n      host: {\n        class: CLASS_NAME.BACKDROP\n      }\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ɵngcc0.Renderer2\n    }];\n  }, null);\n})(); // todo: should we support enforce focus in?\n\n\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_TRANSITION_DURATION = 150;\n/** Mark any code with directive to show it's content in modal */\n\nclass ModalDirective {\n  constructor(_element, _viewContainerRef, _renderer, clf, modalDefaultOption) {\n    this._element = _element;\n    this._renderer = _renderer;\n    /** This event fires immediately when the `show` instance method is called. */\n\n    this.onShow = new EventEmitter();\n    /** This event is fired when the modal has been made visible to the user\n     * (will wait for CSS transitions to complete)\n     */\n\n    this.onShown = new EventEmitter();\n    /** This event is fired immediately when\n     * the hide instance method has been called.\n     */\n\n    this.onHide = new EventEmitter();\n    /** This event is fired when the modal has finished being\n     * hidden from the user (will wait for CSS transitions to complete).\n     */\n\n    this.onHidden = new EventEmitter();\n    this._isShown = false;\n    this.isBodyOverflowing = false;\n    this.originalBodyPadding = 0;\n    this.scrollbarWidth = 0;\n    this.timerHideModal = 0;\n    this.timerRmBackDrop = 0;\n    this.isNested = false;\n    this.clickStartedInContent = false;\n    this._backdrop = clf.createLoader(_element, _viewContainerRef, _renderer);\n    this._config = modalDefaultOption || modalConfigDefaults;\n  }\n  /** allows to set modal configuration via element property */\n\n\n  set config(conf) {\n    this._config = this.getConfig(conf);\n  }\n\n  get config() {\n    return this._config;\n  }\n\n  get isShown() {\n    return this._isShown;\n  }\n\n  onClickStarted(event) {\n    this.clickStartedInContent = event.target !== this._element.nativeElement;\n  }\n\n  onClickStop(event) {\n    const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n\n    if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || !clickedInBackdrop) {\n      this.clickStartedInContent = false;\n      return;\n    }\n\n    this.dismissReason = DISMISS_REASONS.BACKRDOP;\n    this.hide(event);\n  } // todo: consider preventing default and stopping propagation\n\n\n  onEsc(event) {\n    if (!this._isShown) {\n      return;\n    }\n\n    if (event.keyCode === 27 || event.key === 'Escape') {\n      event.preventDefault();\n    }\n\n    if (this.config.keyboard) {\n      this.dismissReason = DISMISS_REASONS.ESC;\n      this.hide();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._isShown) {\n      this._isShown = false;\n      this.hideModal();\n\n      this._backdrop.dispose();\n    }\n  }\n\n  ngOnInit() {\n    this._config = this._config || this.getConfig();\n    setTimeout(() => {\n      if (this._config.show) {\n        this.show();\n      }\n    }, 0);\n  }\n  /* Public methods */\n\n  /** Allows to manually toggle modal visibility */\n\n\n  toggle() {\n    return this._isShown ? this.hide() : this.show();\n  }\n  /** Allows to manually open modal */\n\n\n  show() {\n    this.dismissReason = void 0;\n    this.onShow.emit(this);\n\n    if (this._isShown) {\n      return;\n    }\n\n    clearTimeout(this.timerHideModal);\n    clearTimeout(this.timerRmBackDrop);\n    this._isShown = true;\n    this.checkScrollbar();\n    this.setScrollbar();\n\n    if (document$1 && document$1.body) {\n      if (document$1.body.classList.contains(CLASS_NAME.OPEN)) {\n        this.isNested = true;\n      } else {\n        this._renderer.addClass(document$1.body, CLASS_NAME.OPEN);\n\n        this._renderer.setStyle(document$1.body, 'overflow-y', 'hidden');\n      }\n    }\n\n    this.showBackdrop(() => {\n      this.showElement();\n    });\n  }\n  /** Check if we can close the modal */\n\n\n  hide(event) {\n    if (!this._isShown) {\n      return;\n    }\n\n    if (event) {\n      event.preventDefault();\n    }\n\n    if (this.config.closeInterceptor) {\n      this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n      return;\n    }\n\n    this._hide();\n  }\n  /** Private methods @internal */\n\n  /**\n   *  Manually close modal\n   *  @internal\n   */\n\n\n  _hide() {\n    this.onHide.emit(this);\n    window$1.clearTimeout(this.timerHideModal);\n    window$1.clearTimeout(this.timerRmBackDrop);\n    this._isShown = false;\n\n    this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.IN);\n\n    if (!isBs3()) {\n      this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.SHOW);\n    } // this._addClassIn = false;\n\n\n    if (this._config.animated) {\n      this.timerHideModal = window$1.setTimeout(() => this.hideModal(), TRANSITION_DURATION);\n    } else {\n      this.hideModal();\n    }\n  }\n\n  getConfig(config) {\n    return Object.assign({}, this._config, config);\n  }\n  /**\n   *  Show dialog\n   *  @internal\n   */\n\n\n  showElement() {\n    // todo: replace this with component loader usage\n    if (!this._element.nativeElement.parentNode || this._element.nativeElement.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // don't move modals dom position\n      if (document$1 && document$1.body) {\n        document$1.body.appendChild(this._element.nativeElement);\n      }\n    }\n\n    this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'false');\n\n    this._renderer.setAttribute(this._element.nativeElement, 'aria-modal', 'true');\n\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n\n    this._renderer.setProperty(this._element.nativeElement, 'scrollTop', 0);\n\n    if (this._config.animated) {\n      Utils.reflow(this._element.nativeElement);\n    } // this._addClassIn = true;\n\n\n    this._renderer.addClass(this._element.nativeElement, CLASS_NAME.IN);\n\n    if (!isBs3()) {\n      this._renderer.addClass(this._element.nativeElement, CLASS_NAME.SHOW);\n    }\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._element.nativeElement.focus();\n      }\n\n      this.onShown.emit(this);\n    };\n\n    if (this._config.animated) {\n      setTimeout(transitionComplete, TRANSITION_DURATION);\n    } else {\n      transitionComplete();\n    }\n  }\n  /** @internal */\n\n\n  hideModal() {\n    this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'true');\n\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'none');\n\n    this.showBackdrop(() => {\n      if (!this.isNested) {\n        if (document$1 && document$1.body) {\n          this._renderer.removeClass(document$1.body, CLASS_NAME.OPEN);\n\n          this._renderer.setStyle(document$1.body, 'overflow-y', '');\n        }\n\n        this.resetScrollbar();\n      }\n\n      this.resetAdjustments();\n      this.focusOtherModal();\n      this.onHidden.emit(this);\n    });\n  } // todo: original show was calling a callback when done, but we can use\n  // promise\n\n  /** @internal */\n\n\n  showBackdrop(callback) {\n    if (this._isShown && this.config.backdrop && (!this.backdrop || !this.backdrop.instance.isShown)) {\n      this.removeBackdrop();\n\n      this._backdrop.attach(ModalBackdropComponent).to('body').show({\n        isAnimated: this._config.animated\n      });\n\n      this.backdrop = this._backdrop._componentRef;\n\n      if (!callback) {\n        return;\n      }\n\n      if (!this._config.animated) {\n        callback();\n        return;\n      }\n\n      setTimeout(callback, BACKDROP_TRANSITION_DURATION);\n    } else if (!this._isShown && this.backdrop) {\n      this.backdrop.instance.isShown = false;\n\n      const callbackRemove = () => {\n        this.removeBackdrop();\n\n        if (callback) {\n          callback();\n        }\n      };\n\n      if (this.backdrop.instance.isAnimated) {\n        this.timerRmBackDrop = window$1.setTimeout(callbackRemove, BACKDROP_TRANSITION_DURATION);\n      } else {\n        callbackRemove();\n      }\n    } else if (callback) {\n      callback();\n    }\n  }\n  /** @internal */\n\n\n  removeBackdrop() {\n    this._backdrop.hide();\n  }\n  /** Events tricks */\n  // no need for it\n  // protected setEscapeEvent():void {\n  //   if (this._isShown && this._config.keyboard) {\n  //     $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\n  //       if (event.which === 27) {\n  //         this.hide()\n  //       }\n  //     })\n  //\n  //   } else if (!this._isShown) {\n  //     $(this._element).off(Event.KEYDOWN_DISMISS)\n  //   }\n  // }\n  // protected setResizeEvent():void {\n  // console.log(this.renderer.listenGlobal('', Event.RESIZE));\n  // if (this._isShown) {\n  //   $(window).on(Event.RESIZE, $.proxy(this._handleUpdate, this))\n  // } else {\n  //   $(window).off(Event.RESIZE)\n  // }\n  // }\n\n\n  focusOtherModal() {\n    if (this._element.nativeElement.parentElement == null) {\n      return;\n    }\n\n    const otherOpenedModals = this._element.nativeElement.parentElement.querySelectorAll('.in[bsModal]');\n\n    if (!otherOpenedModals.length) {\n      return;\n    }\n\n    otherOpenedModals[otherOpenedModals.length - 1].focus();\n  }\n  /** @internal */\n\n\n  resetAdjustments() {\n    this._renderer.setStyle(this._element.nativeElement, 'paddingLeft', '');\n\n    this._renderer.setStyle(this._element.nativeElement, 'paddingRight', '');\n  }\n  /** Scroll bar tricks */\n\n  /** @internal */\n\n\n  checkScrollbar() {\n    this.isBodyOverflowing = document$1.body.clientWidth < window$1.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n\n  setScrollbar() {\n    if (!document$1) {\n      return;\n    }\n\n    this.originalBodyPadding = parseInt(window$1.getComputedStyle(document$1.body).getPropertyValue('padding-right') || 0, 10);\n\n    if (this.isBodyOverflowing) {\n      document$1.body.style.paddingRight = `${this.originalBodyPadding + this.scrollbarWidth}px`;\n    }\n  }\n\n  resetScrollbar() {\n    document$1.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  } // thx d.walsh\n\n\n  getScrollbarWidth() {\n    const scrollDiv = this._renderer.createElement('div');\n\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n\n    this._renderer.appendChild(document$1.body, scrollDiv);\n\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    this._renderer.removeChild(document$1.body, scrollDiv);\n\n    return scrollbarWidth;\n  }\n\n}\n\nModalDirective.ɵfac = function ModalDirective_Factory(t) {\n  return new (t || ModalDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ComponentLoaderFactory), ɵngcc0.ɵɵdirectiveInject(MODAL_CONFIG_DEFAULT_OVERRIDE, 8));\n};\n\nModalDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: ModalDirective,\n  selectors: [[\"\", \"bsModal\", \"\"]],\n  hostBindings: function ModalDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"mousedown\", function ModalDirective_mousedown_HostBindingHandler($event) {\n        return ctx.onClickStarted($event);\n      })(\"mouseup\", function ModalDirective_mouseup_HostBindingHandler($event) {\n        return ctx.onClickStop($event);\n      })(\"keydown.esc\", function ModalDirective_keydown_esc_HostBindingHandler($event) {\n        return ctx.onEsc($event);\n      });\n    }\n  },\n  inputs: {\n    config: \"config\",\n    closeInterceptor: \"closeInterceptor\"\n  },\n  outputs: {\n    onShow: \"onShow\",\n    onShown: \"onShown\",\n    onHide: \"onHide\",\n    onHidden: \"onHidden\"\n  },\n  exportAs: [\"bs-modal\"]\n});\n\nModalDirective.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: ViewContainerRef\n}, {\n  type: Renderer2\n}, {\n  type: ComponentLoaderFactory\n}, {\n  type: ModalOptions,\n  decorators: [{\n    type: Optional\n  }, {\n    type: Inject,\n    args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n  }]\n}];\n\nModalDirective.propDecorators = {\n  config: [{\n    type: Input\n  }],\n  closeInterceptor: [{\n    type: Input\n  }],\n  onShow: [{\n    type: Output\n  }],\n  onShown: [{\n    type: Output\n  }],\n  onHide: [{\n    type: Output\n  }],\n  onHidden: [{\n    type: Output\n  }],\n  onClickStarted: [{\n    type: HostListener,\n    args: ['mousedown', ['$event']]\n  }],\n  onClickStop: [{\n    type: HostListener,\n    args: ['mouseup', ['$event']]\n  }],\n  onEsc: [{\n    type: HostListener,\n    args: ['keydown.esc', ['$event']]\n  }]\n};\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bsModal]',\n      exportAs: 'bs-modal'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ɵngcc0.ViewContainerRef\n    }, {\n      type: ɵngcc0.Renderer2\n    }, {\n      type: ɵngcc2.ComponentLoaderFactory\n    }, {\n      type: ModalOptions,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n      }]\n    }];\n  }, {\n    onShow: [{\n      type: Output\n    }],\n    onShown: [{\n      type: Output\n    }],\n    onHide: [{\n      type: Output\n    }],\n    onHidden: [{\n      type: Output\n    }],\n    config: [{\n      type: Input\n    }],\n    onClickStarted: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n    onClickStop: [{\n      type: HostListener,\n      args: ['mouseup', ['$event']]\n    }],\n    // todo: consider preventing default and stopping propagation\n    onEsc: [{\n      type: HostListener,\n      args: ['keydown.esc', ['$event']]\n    }],\n    closeInterceptor: [{\n      type: Input\n    }]\n  });\n})();\n\nlet currentId = 1;\n\nclass BsModalService {\n  constructor(rendererFactory, clf, modalDefaultOption) {\n    this.clf = clf;\n    this.modalDefaultOption = modalDefaultOption;\n    this.onShow = new EventEmitter();\n    this.onShown = new EventEmitter();\n    this.onHide = new EventEmitter();\n    this.onHidden = new EventEmitter();\n    this.isBodyOverflowing = false;\n    this.originalBodyPadding = 0;\n    this.scrollbarWidth = 0;\n    this.modalsCount = 0;\n    this.loaders = [];\n    this._backdropLoader = this.clf.createLoader();\n    this._renderer = rendererFactory.createRenderer(null, null);\n    this.config = modalDefaultOption ? Object.assign({}, modalConfigDefaults, modalDefaultOption) : modalConfigDefaults;\n  }\n  /** Shows a modal */\n\n\n  show( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  content, config) {\n    this.modalsCount++;\n\n    this._createLoaders(); // must be different per every show() call\n\n\n    const id = (config === null || config === void 0 ? void 0 : config.id) || currentId++;\n    this.config = this.modalDefaultOption ? Object.assign({}, modalConfigDefaults, this.modalDefaultOption, config) : Object.assign({}, modalConfigDefaults, config);\n    this.config.id = id;\n\n    this._showBackdrop();\n\n    this.lastDismissReason = void 0;\n    return this._showModal(content);\n  }\n\n  hide(id) {\n    if (this.modalsCount === 1 || id == null) {\n      this._hideBackdrop();\n\n      this.resetScrollbar();\n    }\n\n    this.modalsCount = this.modalsCount >= 1 && id != null ? this.modalsCount - 1 : 0;\n    setTimeout(() => {\n      this._hideModal(id);\n\n      this.removeLoaders(id);\n    }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\n  }\n\n  _showBackdrop() {\n    const isBackdropEnabled = this.config.backdrop === true || this.config.backdrop === 'static';\n    const isBackdropInDOM = !this.backdropRef || !this.backdropRef.instance.isShown;\n\n    if (this.modalsCount === 1) {\n      this.removeBackdrop();\n\n      if (isBackdropEnabled && isBackdropInDOM) {\n        this._backdropLoader.attach(ModalBackdropComponent).to('body').show({\n          isAnimated: this.config.animated\n        });\n\n        this.backdropRef = this._backdropLoader._componentRef;\n      }\n    }\n  }\n\n  _hideBackdrop() {\n    if (!this.backdropRef) {\n      return;\n    }\n\n    this.backdropRef.instance.isShown = false;\n    const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\n    setTimeout(() => this.removeBackdrop(), duration);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  _showModal(content) {\n    var _a;\n\n    const modalLoader = this.loaders[this.loaders.length - 1];\n\n    if (this.config && this.config.providers) {\n      for (const provider of this.config.providers) {\n        modalLoader.provide(provider);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    const bsModalRef = new BsModalRef();\n    const modalContainerRef = modalLoader.provide({\n      provide: ModalOptions,\n      useValue: this.config\n    }).provide({\n      provide: BsModalRef,\n      useValue: bsModalRef\n    }).attach(ModalContainerComponent).to('body');\n\n    bsModalRef.hide = () => {\n      var _a;\n\n      return (_a = modalContainerRef.instance) === null || _a === void 0 ? void 0 : _a.hide();\n    };\n\n    bsModalRef.setClass = newClass => {\n      if (modalContainerRef.instance) {\n        modalContainerRef.instance.config.class = newClass;\n      }\n    };\n\n    bsModalRef.onHidden = new EventEmitter();\n    bsModalRef.onHide = new EventEmitter();\n    this.copyEvent(modalLoader.onBeforeHide, bsModalRef.onHide);\n    this.copyEvent(modalLoader.onHidden, bsModalRef.onHidden); // call 'show' method after assign setClass in bsModalRef.\n    // it makes modal component's bsModalRef available to call setClass method\n\n    modalContainerRef.show({\n      content,\n      isAnimated: this.config.animated,\n      initialState: this.config.initialState,\n      bsModalService: this,\n      id: this.config.id\n    });\n\n    if (modalContainerRef.instance) {\n      modalContainerRef.instance.level = this.getModalsCount();\n      bsModalRef.content = modalLoader.getInnerComponent();\n      bsModalRef.id = (_a = modalContainerRef.instance.config) === null || _a === void 0 ? void 0 : _a.id;\n    }\n\n    return bsModalRef;\n  }\n\n  _hideModal(id) {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => {\n        var _a;\n\n        return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id;\n      });\n      const modalLoader = this.loaders[indexToRemove];\n\n      if (modalLoader) {\n        modalLoader.hide(id);\n      }\n    } else {\n      this.loaders.forEach(loader => {\n        if (loader.instance) {\n          loader.hide(loader.instance.config.id);\n        }\n      });\n    }\n  }\n\n  getModalsCount() {\n    return this.modalsCount;\n  }\n\n  setDismissReason(reason) {\n    this.lastDismissReason = reason;\n  }\n\n  removeBackdrop() {\n    this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n\n    this._renderer.setStyle(document.body, 'overflow-y', '');\n\n    this._backdropLoader.hide();\n\n    this.backdropRef = void 0;\n  }\n  /** Checks if the body is overflowing and sets scrollbar width */\n\n  /** @internal */\n\n\n  checkScrollbar() {\n    this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n\n  setScrollbar() {\n    if (!document) {\n      return;\n    }\n\n    this.originalBodyPadding = parseInt(window.getComputedStyle(document.body).getPropertyValue('padding-right') || '0', 10);\n\n    if (this.isBodyOverflowing) {\n      document.body.style.paddingRight = `${this.originalBodyPadding + this.scrollbarWidth}px`;\n    }\n  }\n\n  resetScrollbar() {\n    document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  } // thx d.walsh\n\n\n  getScrollbarWidth() {\n    const scrollDiv = this._renderer.createElement('div');\n\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n\n    this._renderer.appendChild(document.body, scrollDiv);\n\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    this._renderer.removeChild(document.body, scrollDiv);\n\n    return scrollbarWidth;\n  }\n\n  _createLoaders() {\n    const loader = this.clf.createLoader();\n    this.copyEvent(loader.onBeforeShow, this.onShow);\n    this.copyEvent(loader.onShown, this.onShown);\n    this.copyEvent(loader.onBeforeHide, this.onHide);\n    this.copyEvent(loader.onHidden, this.onHidden);\n    this.loaders.push(loader);\n  }\n\n  removeLoaders(id) {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => {\n        var _a;\n\n        return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id;\n      });\n\n      if (indexToRemove >= 0) {\n        this.loaders.splice(indexToRemove, 1);\n        this.loaders.forEach((loader, i) => {\n          if (loader.instance) {\n            loader.instance.level = i + 1;\n          }\n        });\n      }\n    } else {\n      this.loaders.splice(0, this.loaders.length);\n    }\n  }\n\n  copyEvent(from, to) {\n    from.subscribe(data => {\n      to.emit(this.lastDismissReason || data);\n    });\n  }\n\n}\n\nBsModalService.ɵfac = function BsModalService_Factory(t) {\n  return new (t || BsModalService)(ɵngcc0.ɵɵinject(ɵngcc0.RendererFactory2), ɵngcc0.ɵɵinject(ɵngcc2.ComponentLoaderFactory), ɵngcc0.ɵɵinject(MODAL_CONFIG_DEFAULT_OVERRIDE, 8));\n};\n\nBsModalService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: BsModalService,\n  factory: BsModalService.ɵfac\n});\n\nBsModalService.ctorParameters = () => [{\n  type: RendererFactory2\n}, {\n  type: ComponentLoaderFactory\n}, {\n  type: ModalOptions,\n  decorators: [{\n    type: Optional\n  }, {\n    type: Inject,\n    args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n  }]\n}];\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BsModalService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: ɵngcc0.RendererFactory2\n    }, {\n      type: ɵngcc2.ComponentLoaderFactory\n    }, {\n      type: ModalOptions,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n      }]\n    }];\n  }, null);\n})();\n\nconst focusTrapModule = FocusTrapModule.forRoot();\n\nclass ModalModule {\n  static forRoot() {\n    return {\n      ngModule: ModalModule,\n      providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n    };\n  }\n\n  static forChild() {\n    return {\n      ngModule: ModalModule,\n      providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n    };\n  }\n\n}\n\nModalModule.ɵfac = function ModalModule_Factory(t) {\n  return new (t || ModalModule)();\n};\n\nModalModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: ModalModule\n});\nModalModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  imports: [FocusTrapModule]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalModule, [{\n    type: NgModule,\n    args: [{\n      imports: [FocusTrapModule],\n      declarations: [ModalBackdropComponent, ModalDirective, ModalContainerComponent],\n      exports: [ModalBackdropComponent, ModalDirective],\n      entryComponents: [ModalBackdropComponent, ModalContainerComponent]\n    }]\n  }], null, null);\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ModalModule, {\n    declarations: function () {\n      return [ModalBackdropComponent, ModalDirective, ModalContainerComponent];\n    },\n    imports: function () {\n      return [FocusTrapModule];\n    },\n    exports: function () {\n      return [ModalBackdropComponent, ModalDirective];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { BsModalRef, BsModalService, MODAL_CONFIG_DEFAULT_OVERRIDE, ModalBackdropComponent, ModalBackdropOptions, ModalContainerComponent, ModalDirective, ModalModule, ModalOptions, CLASS_NAME as ɵa };","map":{"version":3,"names":["Injectable","InjectionToken","Component","ElementRef","Renderer2","HostListener","EventEmitter","Directive","ViewContainerRef","Optional","Inject","Input","Output","RendererFactory2","NgModule","isBs3","Utils","document","document$1","window","window$1","ComponentLoaderFactory","PositioningService","FocusTrapModule","ɵngcc0","ɵngcc1","ɵngcc2","_c0","BsModalRef","constructor","hide","setClass","ɵfac","BsModalRef_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","ngDevMode","ɵsetClassMetadata","type","ModalBackdropOptions","options","animate","Object","assign","ModalOptions","ModalOptions_Factory","modalConfigDefaults","backdrop","keyboard","focus","show","ignoreBackdropClick","class","animated","initialState","closeInterceptor","MODAL_CONFIG_DEFAULT_OVERRIDE","CLASS_NAME","SCROLLBAR_MEASURER","BACKDROP","OPEN","FADE","IN","SHOW","SELECTOR","DIALOG","DATA_TOGGLE","DATA_DISMISS","FIXED_CONTENT","TRANSITION_DURATIONS","MODAL","DISMISS_REASONS","BACKRDOP","ESC","BACK","ModalContainerComponent","_element","_renderer","isShown","isAnimated","isModalHiding","clickStartedInContent","config","ngOnInit","addClass","nativeElement","setStyle","setTimeout","body","bsModalService","getModalsCount","checkScrollbar","setScrollbar","onClickStarted","event","target","onClickStop","_a","clickedInBackdrop","setDismissReason","onPopState","onEsc","_b","keyCode","key","preventDefault","level","ngOnDestroy","_hide","then","undefined","removeClass","id","ModalContainerComponent_Factory","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","selectors","hostAttrs","hostVars","hostBindings","ModalContainerComponent_HostBindings","rf","ctx","ɵɵlistener","ModalContainerComponent_mousedown_HostBindingHandler","$event","ModalContainerComponent_click_HostBindingHandler","ModalContainerComponent_popstate_HostBindingHandler","ɵɵresolveWindow","ModalContainerComponent_keydown_esc_HostBindingHandler","ɵɵattribute","ariaLabelledBy","ariaDescribedby","ngContentSelectors","decls","vars","consts","template","ModalContainerComponent_Template","ɵɵprojectionDef","ɵɵelementStart","ɵɵprojection","ɵɵelementEnd","ɵɵclassMap","dependencies","FocusTrapDirective","encapsulation","ctorParameters","propDecorators","args","selector","host","role","tabindex","ModalBackdropComponent","element","renderer","_isAnimated","_isShown","value","reflow","ModalBackdropComponent_Factory","ModalBackdropComponent_Template","TRANSITION_DURATION","BACKDROP_TRANSITION_DURATION","ModalDirective","_viewContainerRef","clf","modalDefaultOption","onShow","onShown","onHide","onHidden","isBodyOverflowing","originalBodyPadding","scrollbarWidth","timerHideModal","timerRmBackDrop","isNested","_backdrop","createLoader","_config","conf","getConfig","dismissReason","hideModal","dispose","toggle","emit","clearTimeout","classList","contains","showBackdrop","showElement","parentNode","nodeType","Node","ELEMENT_NODE","appendChild","setAttribute","setProperty","transitionComplete","resetScrollbar","resetAdjustments","focusOtherModal","callback","instance","removeBackdrop","attach","to","_componentRef","callbackRemove","parentElement","otherOpenedModals","querySelectorAll","length","clientWidth","innerWidth","getScrollbarWidth","parseInt","getComputedStyle","getPropertyValue","style","paddingRight","scrollDiv","createElement","offsetWidth","removeChild","ModalDirective_Factory","ɵdir","ɵɵdefineDirective","ModalDirective_HostBindings","ModalDirective_mousedown_HostBindingHandler","ModalDirective_mouseup_HostBindingHandler","ModalDirective_keydown_esc_HostBindingHandler","inputs","outputs","exportAs","decorators","currentId","BsModalService","rendererFactory","modalsCount","loaders","_backdropLoader","createRenderer","content","_createLoaders","_showBackdrop","lastDismissReason","_showModal","_hideBackdrop","_hideModal","removeLoaders","isBackdropEnabled","isBackdropInDOM","backdropRef","duration","modalLoader","providers","provider","provide","bsModalRef","modalContainerRef","useValue","newClass","copyEvent","onBeforeHide","getInnerComponent","indexToRemove","findIndex","loader","forEach","reason","onBeforeShow","push","splice","i","from","subscribe","data","BsModalService_Factory","ɵɵinject","focusTrapModule","forRoot","ModalModule","ngModule","forChild","ModalModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","declarations","exports","entryComponents","ngJitMode","ɵɵsetNgModuleScope","ɵa"],"sources":["C:/Users/BongumusaN/TestingApp/client/node_modules/ngx-bootstrap/__ivy_ngcc__/modal/fesm2015/ngx-bootstrap-modal.js"],"sourcesContent":["import { Injectable, InjectionToken, Component, ElementRef, Renderer2, HostListener, EventEmitter, Directive, ViewContainerRef, Optional, Inject, Input, Output, RendererFactory2, NgModule } from '@angular/core';\nimport { isBs3, Utils, document as document$1, window as window$1 } from 'ngx-bootstrap/utils';\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\nimport { FocusTrapModule } from 'ngx-bootstrap/focus-trap';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from 'ngx-bootstrap/focus-trap';\nimport * as ɵngcc2 from 'ngx-bootstrap/component-loader';\n\nconst _c0 = [\"*\"];\nclass BsModalRef {\n    constructor() {\n        /**\n         * Hides the modal\n         */\n        this.hide = () => void 0;\n        /**\n         * Sets new class to modal window\n         */\n        this.setClass = () => void 0;\n    }\n}\nBsModalRef.ɵfac = function BsModalRef_Factory(t) { return new (t || BsModalRef)(); };\nBsModalRef.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: BsModalRef, factory: BsModalRef.ɵfac });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BsModalRef, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n\nclass ModalBackdropOptions {\n    constructor(options) {\n        this.animate = true;\n        Object.assign(this, options);\n    }\n}\n\nclass ModalOptions {\n}\nModalOptions.ɵfac = function ModalOptions_Factory(t) { return new (t || ModalOptions)(); };\nModalOptions.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: ModalOptions, factory: ModalOptions.ɵfac });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalOptions, [{\n        type: Injectable\n    }], null, null); })();\nconst modalConfigDefaults = {\n    backdrop: true,\n    keyboard: true,\n    focus: true,\n    show: false,\n    ignoreBackdropClick: false,\n    class: '',\n    animated: true,\n    initialState: {},\n    closeInterceptor: void 0\n};\nconst MODAL_CONFIG_DEFAULT_OVERRIDE = new InjectionToken('override-default-config');\nconst CLASS_NAME = {\n    SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n    BACKDROP: 'modal-backdrop',\n    OPEN: 'modal-open',\n    FADE: 'fade',\n    IN: 'in',\n    SHOW: 'show' // bs4\n};\nconst SELECTOR = {\n    DIALOG: '.modal-dialog',\n    DATA_TOGGLE: '[data-toggle=\"modal\"]',\n    DATA_DISMISS: '[data-dismiss=\"modal\"]',\n    FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\n};\nconst TRANSITION_DURATIONS = {\n    MODAL: 300,\n    BACKDROP: 150\n};\nconst DISMISS_REASONS = {\n    BACKRDOP: 'backdrop-click',\n    ESC: 'esc',\n    BACK: 'browser-back-navigation-clicked'\n};\n\nclass ModalContainerComponent {\n    constructor(options, _element, _renderer) {\n        this._element = _element;\n        this._renderer = _renderer;\n        this.isShown = false;\n        this.isAnimated = false;\n        this.isModalHiding = false;\n        this.clickStartedInContent = false;\n        this.config = Object.assign({}, options);\n    }\n    ngOnInit() {\n        if (this.isAnimated) {\n            this._renderer.addClass(this._element.nativeElement, CLASS_NAME.FADE);\n        }\n        this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n        setTimeout(() => {\n            this.isShown = true;\n            this._renderer.addClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n        }, this.isAnimated ? TRANSITION_DURATIONS.BACKDROP : 0);\n        if (document && document.body) {\n            if (this.bsModalService && this.bsModalService.getModalsCount() === 1) {\n                this.bsModalService.checkScrollbar();\n                this.bsModalService.setScrollbar();\n            }\n            this._renderer.addClass(document.body, CLASS_NAME.OPEN);\n            this._renderer.setStyle(document.body, 'overflow-y', 'hidden');\n        }\n        if (this._element.nativeElement) {\n            this._element.nativeElement.focus();\n        }\n    }\n    onClickStarted(event) {\n        this.clickStartedInContent = event.target !== this._element.nativeElement;\n    }\n    onClickStop(event) {\n        var _a;\n        const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n        if (this.config.ignoreBackdropClick ||\n            this.config.backdrop === 'static' ||\n            !clickedInBackdrop) {\n            this.clickStartedInContent = false;\n            return;\n        }\n        (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACKRDOP);\n        this.hide();\n    }\n    onPopState() {\n        var _a;\n        (_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.setDismissReason(DISMISS_REASONS.BACK);\n        this.hide();\n    }\n    onEsc(event) {\n        var _a, _b;\n        if (!this.isShown) {\n            return;\n        }\n        if (event.keyCode === 27 || event.key === 'Escape') {\n            event.preventDefault();\n        }\n        if (this.config.keyboard &&\n            this.level === ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount())) {\n            (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.setDismissReason(DISMISS_REASONS.ESC);\n            this.hide();\n        }\n    }\n    ngOnDestroy() {\n        if (this.isShown) {\n            this._hide();\n        }\n    }\n    hide() {\n        if (this.isModalHiding || !this.isShown) {\n            return;\n        }\n        if (this.config.closeInterceptor) {\n            this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n            return;\n        }\n        this._hide();\n    }\n    _hide() {\n        this.isModalHiding = true;\n        this._renderer.removeClass(this._element.nativeElement, isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW);\n        setTimeout(() => {\n            var _a, _b;\n            this.isShown = false;\n            if (document &&\n                document.body &&\n                ((_a = this.bsModalService) === null || _a === void 0 ? void 0 : _a.getModalsCount()) === 1) {\n                this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n                this._renderer.setStyle(document.body, 'overflow-y', '');\n            }\n            (_b = this.bsModalService) === null || _b === void 0 ? void 0 : _b.hide(this.config.id);\n            this.isModalHiding = false;\n        }, this.isAnimated ? TRANSITION_DURATIONS.MODAL : 0);\n    }\n}\nModalContainerComponent.ɵfac = function ModalContainerComponent_Factory(t) { return new (t || ModalContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ModalOptions), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };\nModalContainerComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ModalContainerComponent, selectors: [[\"modal-container\"]], hostAttrs: [\"role\", \"dialog\", \"tabindex\", \"-1\", 1, \"modal\"], hostVars: 3, hostBindings: function ModalContainerComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"mousedown\", function ModalContainerComponent_mousedown_HostBindingHandler($event) { return ctx.onClickStarted($event); })(\"click\", function ModalContainerComponent_click_HostBindingHandler($event) { return ctx.onClickStop($event); })(\"popstate\", function ModalContainerComponent_popstate_HostBindingHandler() { return ctx.onPopState(); }, false, ɵngcc0.ɵɵresolveWindow)(\"keydown.esc\", function ModalContainerComponent_keydown_esc_HostBindingHandler($event) { return ctx.onEsc($event); }, false, ɵngcc0.ɵɵresolveWindow);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-modal\", true)(\"aria-labelledby\", ctx.config.ariaLabelledBy)(\"aria-describedby\", ctx.config.ariaDescribedby);\n    } }, ngContentSelectors: _c0, decls: 3, vars: 2, consts: [[\"role\", \"document\", \"focusTrap\", \"\"], [1, \"modal-content\"]], template: function ModalContainerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd()();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(\"modal-dialog\" + (ctx.config.class ? \" \" + ctx.config.class : \"\"));\n    } }, dependencies: [ɵngcc1.FocusTrapDirective], encapsulation: 2 });\nModalContainerComponent.ctorParameters = () => [\n    { type: ModalOptions },\n    { type: ElementRef },\n    { type: Renderer2 }\n];\nModalContainerComponent.propDecorators = {\n    onClickStarted: [{ type: HostListener, args: ['mousedown', ['$event'],] }],\n    onClickStop: [{ type: HostListener, args: ['click', ['$event'],] }],\n    onPopState: [{ type: HostListener, args: ['window:popstate',] }],\n    onEsc: [{ type: HostListener, args: ['window:keydown.esc', ['$event'],] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalContainerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'modal-container',\n                template: `\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n                // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n                host: {\n                    class: 'modal',\n                    role: 'dialog',\n                    tabindex: '-1',\n                    '[attr.aria-modal]': 'true',\n                    '[attr.aria-labelledby]': 'config.ariaLabelledBy',\n                    '[attr.aria-describedby]': 'config.ariaDescribedby'\n                }\n            }]\n    }], function () { return [{ type: ModalOptions }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { onClickStarted: [{\n            type: HostListener,\n            args: ['mousedown', ['$event']]\n        }], onClickStop: [{\n            type: HostListener,\n            args: ['click', ['$event']]\n        }], onPopState: [{\n            type: HostListener,\n            args: ['window:popstate']\n        }], onEsc: [{\n            type: HostListener,\n            args: ['window:keydown.esc', ['$event']]\n        }] }); })();\n\n/** This component will be added as background layout for modals if enabled */\nclass ModalBackdropComponent {\n    constructor(element, renderer) {\n        this._isAnimated = false;\n        this._isShown = false;\n        this.element = element;\n        this.renderer = renderer;\n    }\n    get isAnimated() {\n        return this._isAnimated;\n    }\n    set isAnimated(value) {\n        this._isAnimated = value;\n    }\n    get isShown() {\n        return this._isShown;\n    }\n    set isShown(value) {\n        this._isShown = value;\n        if (value) {\n            this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n        }\n        else {\n            this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\n        }\n        if (!isBs3()) {\n            if (value) {\n                this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n            }\n            else {\n                this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.SHOW}`);\n            }\n        }\n    }\n    ngOnInit() {\n        if (this.isAnimated) {\n            this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.FADE}`);\n            Utils.reflow(this.element.nativeElement);\n        }\n        this.isShown = true;\n    }\n}\nModalBackdropComponent.ɵfac = function ModalBackdropComponent_Factory(t) { return new (t || ModalBackdropComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };\nModalBackdropComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ModalBackdropComponent, selectors: [[\"bs-modal-backdrop\"]], hostAttrs: [1, \"modal-backdrop\"], decls: 0, vars: 0, template: function ModalBackdropComponent_Template(rf, ctx) { }, encapsulation: 2 });\nModalBackdropComponent.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalBackdropComponent, [{\n        type: Component,\n        args: [{\n                selector: 'bs-modal-backdrop',\n                template: ' ',\n                // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n                host: { class: CLASS_NAME.BACKDROP }\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, null); })();\n\n// todo: should we support enforce focus in?\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_TRANSITION_DURATION = 150;\n/** Mark any code with directive to show it's content in modal */\nclass ModalDirective {\n    constructor(_element, _viewContainerRef, _renderer, clf, modalDefaultOption) {\n        this._element = _element;\n        this._renderer = _renderer;\n        /** This event fires immediately when the `show` instance method is called. */\n        this.onShow = new EventEmitter();\n        /** This event is fired when the modal has been made visible to the user\n         * (will wait for CSS transitions to complete)\n         */\n        this.onShown = new EventEmitter();\n        /** This event is fired immediately when\n         * the hide instance method has been called.\n         */\n        this.onHide = new EventEmitter();\n        /** This event is fired when the modal has finished being\n         * hidden from the user (will wait for CSS transitions to complete).\n         */\n        this.onHidden = new EventEmitter();\n        this._isShown = false;\n        this.isBodyOverflowing = false;\n        this.originalBodyPadding = 0;\n        this.scrollbarWidth = 0;\n        this.timerHideModal = 0;\n        this.timerRmBackDrop = 0;\n        this.isNested = false;\n        this.clickStartedInContent = false;\n        this._backdrop = clf.createLoader(_element, _viewContainerRef, _renderer);\n        this._config = modalDefaultOption || modalConfigDefaults;\n    }\n    /** allows to set modal configuration via element property */\n    set config(conf) {\n        this._config = this.getConfig(conf);\n    }\n    get config() {\n        return this._config;\n    }\n    get isShown() {\n        return this._isShown;\n    }\n    onClickStarted(event) {\n        this.clickStartedInContent = event.target !== this._element.nativeElement;\n    }\n    onClickStop(event) {\n        const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n        if (this.config.ignoreBackdropClick ||\n            this.config.backdrop === 'static' ||\n            !clickedInBackdrop) {\n            this.clickStartedInContent = false;\n            return;\n        }\n        this.dismissReason = DISMISS_REASONS.BACKRDOP;\n        this.hide(event);\n    }\n    // todo: consider preventing default and stopping propagation\n    onEsc(event) {\n        if (!this._isShown) {\n            return;\n        }\n        if (event.keyCode === 27 || event.key === 'Escape') {\n            event.preventDefault();\n        }\n        if (this.config.keyboard) {\n            this.dismissReason = DISMISS_REASONS.ESC;\n            this.hide();\n        }\n    }\n    ngOnDestroy() {\n        if (this._isShown) {\n            this._isShown = false;\n            this.hideModal();\n            this._backdrop.dispose();\n        }\n    }\n    ngOnInit() {\n        this._config = this._config || this.getConfig();\n        setTimeout(() => {\n            if (this._config.show) {\n                this.show();\n            }\n        }, 0);\n    }\n    /* Public methods */\n    /** Allows to manually toggle modal visibility */\n    toggle() {\n        return this._isShown ? this.hide() : this.show();\n    }\n    /** Allows to manually open modal */\n    show() {\n        this.dismissReason = void 0;\n        this.onShow.emit(this);\n        if (this._isShown) {\n            return;\n        }\n        clearTimeout(this.timerHideModal);\n        clearTimeout(this.timerRmBackDrop);\n        this._isShown = true;\n        this.checkScrollbar();\n        this.setScrollbar();\n        if (document$1 && document$1.body) {\n            if (document$1.body.classList.contains(CLASS_NAME.OPEN)) {\n                this.isNested = true;\n            }\n            else {\n                this._renderer.addClass(document$1.body, CLASS_NAME.OPEN);\n                this._renderer.setStyle(document$1.body, 'overflow-y', 'hidden');\n            }\n        }\n        this.showBackdrop(() => {\n            this.showElement();\n        });\n    }\n    /** Check if we can close the modal */\n    hide(event) {\n        if (!this._isShown) {\n            return;\n        }\n        if (event) {\n            event.preventDefault();\n        }\n        if (this.config.closeInterceptor) {\n            this.config.closeInterceptor().then(() => this._hide(), () => undefined);\n            return;\n        }\n        this._hide();\n    }\n    /** Private methods @internal */\n    /**\n     *  Manually close modal\n     *  @internal\n     */\n    _hide() {\n        this.onHide.emit(this);\n        window$1.clearTimeout(this.timerHideModal);\n        window$1.clearTimeout(this.timerRmBackDrop);\n        this._isShown = false;\n        this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.IN);\n        if (!isBs3()) {\n            this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.SHOW);\n        }\n        // this._addClassIn = false;\n        if (this._config.animated) {\n            this.timerHideModal = window$1.setTimeout(() => this.hideModal(), TRANSITION_DURATION);\n        }\n        else {\n            this.hideModal();\n        }\n    }\n    getConfig(config) {\n        return Object.assign({}, this._config, config);\n    }\n    /**\n     *  Show dialog\n     *  @internal\n     */\n    showElement() {\n        // todo: replace this with component loader usage\n        if (!this._element.nativeElement.parentNode ||\n            this._element.nativeElement.parentNode.nodeType !== Node.ELEMENT_NODE) {\n            // don't move modals dom position\n            if (document$1 && document$1.body) {\n                document$1.body.appendChild(this._element.nativeElement);\n            }\n        }\n        this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'false');\n        this._renderer.setAttribute(this._element.nativeElement, 'aria-modal', 'true');\n        this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n        this._renderer.setProperty(this._element.nativeElement, 'scrollTop', 0);\n        if (this._config.animated) {\n            Utils.reflow(this._element.nativeElement);\n        }\n        // this._addClassIn = true;\n        this._renderer.addClass(this._element.nativeElement, CLASS_NAME.IN);\n        if (!isBs3()) {\n            this._renderer.addClass(this._element.nativeElement, CLASS_NAME.SHOW);\n        }\n        const transitionComplete = () => {\n            if (this._config.focus) {\n                this._element.nativeElement.focus();\n            }\n            this.onShown.emit(this);\n        };\n        if (this._config.animated) {\n            setTimeout(transitionComplete, TRANSITION_DURATION);\n        }\n        else {\n            transitionComplete();\n        }\n    }\n    /** @internal */\n    hideModal() {\n        this._renderer.setAttribute(this._element.nativeElement, 'aria-hidden', 'true');\n        this._renderer.setStyle(this._element.nativeElement, 'display', 'none');\n        this.showBackdrop(() => {\n            if (!this.isNested) {\n                if (document$1 && document$1.body) {\n                    this._renderer.removeClass(document$1.body, CLASS_NAME.OPEN);\n                    this._renderer.setStyle(document$1.body, 'overflow-y', '');\n                }\n                this.resetScrollbar();\n            }\n            this.resetAdjustments();\n            this.focusOtherModal();\n            this.onHidden.emit(this);\n        });\n    }\n    // todo: original show was calling a callback when done, but we can use\n    // promise\n    /** @internal */\n    showBackdrop(callback) {\n        if (this._isShown &&\n            this.config.backdrop &&\n            (!this.backdrop || !this.backdrop.instance.isShown)) {\n            this.removeBackdrop();\n            this._backdrop\n                .attach(ModalBackdropComponent)\n                .to('body')\n                .show({ isAnimated: this._config.animated });\n            this.backdrop = this._backdrop._componentRef;\n            if (!callback) {\n                return;\n            }\n            if (!this._config.animated) {\n                callback();\n                return;\n            }\n            setTimeout(callback, BACKDROP_TRANSITION_DURATION);\n        }\n        else if (!this._isShown && this.backdrop) {\n            this.backdrop.instance.isShown = false;\n            const callbackRemove = () => {\n                this.removeBackdrop();\n                if (callback) {\n                    callback();\n                }\n            };\n            if (this.backdrop.instance.isAnimated) {\n                this.timerRmBackDrop = window$1.setTimeout(callbackRemove, BACKDROP_TRANSITION_DURATION);\n            }\n            else {\n                callbackRemove();\n            }\n        }\n        else if (callback) {\n            callback();\n        }\n    }\n    /** @internal */\n    removeBackdrop() {\n        this._backdrop.hide();\n    }\n    /** Events tricks */\n    // no need for it\n    // protected setEscapeEvent():void {\n    //   if (this._isShown && this._config.keyboard) {\n    //     $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\n    //       if (event.which === 27) {\n    //         this.hide()\n    //       }\n    //     })\n    //\n    //   } else if (!this._isShown) {\n    //     $(this._element).off(Event.KEYDOWN_DISMISS)\n    //   }\n    // }\n    // protected setResizeEvent():void {\n    // console.log(this.renderer.listenGlobal('', Event.RESIZE));\n    // if (this._isShown) {\n    //   $(window).on(Event.RESIZE, $.proxy(this._handleUpdate, this))\n    // } else {\n    //   $(window).off(Event.RESIZE)\n    // }\n    // }\n    focusOtherModal() {\n        if (this._element.nativeElement.parentElement == null) {\n            return;\n        }\n        const otherOpenedModals = this._element.nativeElement.parentElement.querySelectorAll('.in[bsModal]');\n        if (!otherOpenedModals.length) {\n            return;\n        }\n        otherOpenedModals[otherOpenedModals.length - 1].focus();\n    }\n    /** @internal */\n    resetAdjustments() {\n        this._renderer.setStyle(this._element.nativeElement, 'paddingLeft', '');\n        this._renderer.setStyle(this._element.nativeElement, 'paddingRight', '');\n    }\n    /** Scroll bar tricks */\n    /** @internal */\n    checkScrollbar() {\n        this.isBodyOverflowing = document$1.body.clientWidth < window$1.innerWidth;\n        this.scrollbarWidth = this.getScrollbarWidth();\n    }\n    setScrollbar() {\n        if (!document$1) {\n            return;\n        }\n        this.originalBodyPadding = parseInt(window$1\n            .getComputedStyle(document$1.body)\n            .getPropertyValue('padding-right') || 0, 10);\n        if (this.isBodyOverflowing) {\n            document$1.body.style.paddingRight = `${this.originalBodyPadding +\n                this.scrollbarWidth}px`;\n        }\n    }\n    resetScrollbar() {\n        document$1.body.style.paddingRight = `${this.originalBodyPadding}px`;\n    }\n    // thx d.walsh\n    getScrollbarWidth() {\n        const scrollDiv = this._renderer.createElement('div');\n        this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n        this._renderer.appendChild(document$1.body, scrollDiv);\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this._renderer.removeChild(document$1.body, scrollDiv);\n        return scrollbarWidth;\n    }\n}\nModalDirective.ɵfac = function ModalDirective_Factory(t) { return new (t || ModalDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ComponentLoaderFactory), ɵngcc0.ɵɵdirectiveInject(MODAL_CONFIG_DEFAULT_OVERRIDE, 8)); };\nModalDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ModalDirective, selectors: [[\"\", \"bsModal\", \"\"]], hostBindings: function ModalDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"mousedown\", function ModalDirective_mousedown_HostBindingHandler($event) { return ctx.onClickStarted($event); })(\"mouseup\", function ModalDirective_mouseup_HostBindingHandler($event) { return ctx.onClickStop($event); })(\"keydown.esc\", function ModalDirective_keydown_esc_HostBindingHandler($event) { return ctx.onEsc($event); });\n    } }, inputs: { config: \"config\", closeInterceptor: \"closeInterceptor\" }, outputs: { onShow: \"onShow\", onShown: \"onShown\", onHide: \"onHide\", onHidden: \"onHidden\" }, exportAs: [\"bs-modal\"] });\nModalDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: ViewContainerRef },\n    { type: Renderer2 },\n    { type: ComponentLoaderFactory },\n    { type: ModalOptions, decorators: [{ type: Optional }, { type: Inject, args: [MODAL_CONFIG_DEFAULT_OVERRIDE,] }] }\n];\nModalDirective.propDecorators = {\n    config: [{ type: Input }],\n    closeInterceptor: [{ type: Input }],\n    onShow: [{ type: Output }],\n    onShown: [{ type: Output }],\n    onHide: [{ type: Output }],\n    onHidden: [{ type: Output }],\n    onClickStarted: [{ type: HostListener, args: ['mousedown', ['$event'],] }],\n    onClickStop: [{ type: HostListener, args: ['mouseup', ['$event'],] }],\n    onEsc: [{ type: HostListener, args: ['keydown.esc', ['$event'],] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[bsModal]',\n                exportAs: 'bs-modal'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.ViewContainerRef }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc2.ComponentLoaderFactory }, { type: ModalOptions, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n            }] }]; }, { onShow: [{\n            type: Output\n        }], onShown: [{\n            type: Output\n        }], onHide: [{\n            type: Output\n        }], onHidden: [{\n            type: Output\n        }], config: [{\n            type: Input\n        }], onClickStarted: [{\n            type: HostListener,\n            args: ['mousedown', ['$event']]\n        }], onClickStop: [{\n            type: HostListener,\n            args: ['mouseup', ['$event']]\n        }], \n    // todo: consider preventing default and stopping propagation\n    onEsc: [{\n            type: HostListener,\n            args: ['keydown.esc', ['$event']]\n        }], closeInterceptor: [{\n            type: Input\n        }] }); })();\n\nlet currentId = 1;\nclass BsModalService {\n    constructor(rendererFactory, clf, modalDefaultOption) {\n        this.clf = clf;\n        this.modalDefaultOption = modalDefaultOption;\n        this.onShow = new EventEmitter();\n        this.onShown = new EventEmitter();\n        this.onHide = new EventEmitter();\n        this.onHidden = new EventEmitter();\n        this.isBodyOverflowing = false;\n        this.originalBodyPadding = 0;\n        this.scrollbarWidth = 0;\n        this.modalsCount = 0;\n        this.loaders = [];\n        this._backdropLoader = this.clf.createLoader();\n        this._renderer = rendererFactory.createRenderer(null, null);\n        this.config = modalDefaultOption ?\n            (Object.assign({}, modalConfigDefaults, modalDefaultOption)) :\n            modalConfigDefaults;\n    }\n    /** Shows a modal */\n    show(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    content, config) {\n        this.modalsCount++;\n        this._createLoaders();\n        // must be different per every show() call\n        const id = (config === null || config === void 0 ? void 0 : config.id) || currentId++;\n        this.config = this.modalDefaultOption ?\n            Object.assign({}, modalConfigDefaults, this.modalDefaultOption, config) :\n            Object.assign({}, modalConfigDefaults, config);\n        this.config.id = id;\n        this._showBackdrop();\n        this.lastDismissReason = void 0;\n        return this._showModal(content);\n    }\n    hide(id) {\n        if (this.modalsCount === 1 || id == null) {\n            this._hideBackdrop();\n            this.resetScrollbar();\n        }\n        this.modalsCount = this.modalsCount >= 1 && id != null ? this.modalsCount - 1 : 0;\n        setTimeout(() => {\n            this._hideModal(id);\n            this.removeLoaders(id);\n        }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\n    }\n    _showBackdrop() {\n        const isBackdropEnabled = this.config.backdrop === true || this.config.backdrop === 'static';\n        const isBackdropInDOM = !this.backdropRef || !this.backdropRef.instance.isShown;\n        if (this.modalsCount === 1) {\n            this.removeBackdrop();\n            if (isBackdropEnabled && isBackdropInDOM) {\n                this._backdropLoader\n                    .attach(ModalBackdropComponent)\n                    .to('body')\n                    .show({ isAnimated: this.config.animated });\n                this.backdropRef = this._backdropLoader._componentRef;\n            }\n        }\n    }\n    _hideBackdrop() {\n        if (!this.backdropRef) {\n            return;\n        }\n        this.backdropRef.instance.isShown = false;\n        const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\n        setTimeout(() => this.removeBackdrop(), duration);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _showModal(content) {\n        var _a;\n        const modalLoader = this.loaders[this.loaders.length - 1];\n        if (this.config && this.config.providers) {\n            for (const provider of this.config.providers) {\n                modalLoader.provide(provider);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const bsModalRef = new BsModalRef();\n        const modalContainerRef = modalLoader\n            .provide({ provide: ModalOptions, useValue: this.config })\n            .provide({ provide: BsModalRef, useValue: bsModalRef })\n            .attach(ModalContainerComponent)\n            .to('body');\n        bsModalRef.hide = () => { var _a; return (_a = modalContainerRef.instance) === null || _a === void 0 ? void 0 : _a.hide(); };\n        bsModalRef.setClass = (newClass) => {\n            if (modalContainerRef.instance) {\n                modalContainerRef.instance.config.class = newClass;\n            }\n        };\n        bsModalRef.onHidden = new EventEmitter();\n        bsModalRef.onHide = new EventEmitter();\n        this.copyEvent(modalLoader.onBeforeHide, bsModalRef.onHide);\n        this.copyEvent(modalLoader.onHidden, bsModalRef.onHidden);\n        // call 'show' method after assign setClass in bsModalRef.\n        // it makes modal component's bsModalRef available to call setClass method\n        modalContainerRef.show({\n            content,\n            isAnimated: this.config.animated,\n            initialState: this.config.initialState,\n            bsModalService: this,\n            id: this.config.id\n        });\n        if (modalContainerRef.instance) {\n            modalContainerRef.instance.level = this.getModalsCount();\n            bsModalRef.content = modalLoader.getInnerComponent();\n            bsModalRef.id = (_a = modalContainerRef.instance.config) === null || _a === void 0 ? void 0 : _a.id;\n        }\n        return bsModalRef;\n    }\n    _hideModal(id) {\n        if (id != null) {\n            const indexToRemove = this.loaders.findIndex(loader => { var _a; return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id; });\n            const modalLoader = this.loaders[indexToRemove];\n            if (modalLoader) {\n                modalLoader.hide(id);\n            }\n        }\n        else {\n            this.loaders.forEach((loader) => {\n                if (loader.instance) {\n                    loader.hide(loader.instance.config.id);\n                }\n            });\n        }\n    }\n    getModalsCount() {\n        return this.modalsCount;\n    }\n    setDismissReason(reason) {\n        this.lastDismissReason = reason;\n    }\n    removeBackdrop() {\n        this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n        this._renderer.setStyle(document.body, 'overflow-y', '');\n        this._backdropLoader.hide();\n        this.backdropRef = void 0;\n    }\n    /** Checks if the body is overflowing and sets scrollbar width */\n    /** @internal */\n    checkScrollbar() {\n        this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n        this.scrollbarWidth = this.getScrollbarWidth();\n    }\n    setScrollbar() {\n        if (!document) {\n            return;\n        }\n        this.originalBodyPadding = parseInt(window\n            .getComputedStyle(document.body)\n            .getPropertyValue('padding-right') || '0', 10);\n        if (this.isBodyOverflowing) {\n            document.body.style.paddingRight = `${this.originalBodyPadding +\n                this.scrollbarWidth}px`;\n        }\n    }\n    resetScrollbar() {\n        document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n    }\n    // thx d.walsh\n    getScrollbarWidth() {\n        const scrollDiv = this._renderer.createElement('div');\n        this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n        this._renderer.appendChild(document.body, scrollDiv);\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        this._renderer.removeChild(document.body, scrollDiv);\n        return scrollbarWidth;\n    }\n    _createLoaders() {\n        const loader = this.clf.createLoader();\n        this.copyEvent(loader.onBeforeShow, this.onShow);\n        this.copyEvent(loader.onShown, this.onShown);\n        this.copyEvent(loader.onBeforeHide, this.onHide);\n        this.copyEvent(loader.onHidden, this.onHidden);\n        this.loaders.push(loader);\n    }\n    removeLoaders(id) {\n        if (id != null) {\n            const indexToRemove = this.loaders.findIndex(loader => { var _a; return ((_a = loader.instance) === null || _a === void 0 ? void 0 : _a.config.id) === id; });\n            if (indexToRemove >= 0) {\n                this.loaders.splice(indexToRemove, 1);\n                this.loaders.forEach((loader, i) => {\n                    if (loader.instance) {\n                        loader.instance.level = i + 1;\n                    }\n                });\n            }\n        }\n        else {\n            this.loaders.splice(0, this.loaders.length);\n        }\n    }\n    copyEvent(from, to) {\n        from.subscribe((data) => {\n            to.emit(this.lastDismissReason || data);\n        });\n    }\n}\nBsModalService.ɵfac = function BsModalService_Factory(t) { return new (t || BsModalService)(ɵngcc0.ɵɵinject(ɵngcc0.RendererFactory2), ɵngcc0.ɵɵinject(ɵngcc2.ComponentLoaderFactory), ɵngcc0.ɵɵinject(MODAL_CONFIG_DEFAULT_OVERRIDE, 8)); };\nBsModalService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: BsModalService, factory: BsModalService.ɵfac });\nBsModalService.ctorParameters = () => [\n    { type: RendererFactory2 },\n    { type: ComponentLoaderFactory },\n    { type: ModalOptions, decorators: [{ type: Optional }, { type: Inject, args: [MODAL_CONFIG_DEFAULT_OVERRIDE,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BsModalService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc0.RendererFactory2 }, { type: ɵngcc2.ComponentLoaderFactory }, { type: ModalOptions, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [MODAL_CONFIG_DEFAULT_OVERRIDE]\n            }] }]; }, null); })();\n\nconst focusTrapModule = FocusTrapModule.forRoot();\nclass ModalModule {\n    static forRoot() {\n        return {\n            ngModule: ModalModule,\n            providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n        };\n    }\n    static forChild() {\n        return {\n            ngModule: ModalModule,\n            providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n        };\n    }\n}\nModalModule.ɵfac = function ModalModule_Factory(t) { return new (t || ModalModule)(); };\nModalModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: ModalModule });\nModalModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [FocusTrapModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ModalModule, [{\n        type: NgModule,\n        args: [{\n                imports: [FocusTrapModule],\n                declarations: [\n                    ModalBackdropComponent,\n                    ModalDirective,\n                    ModalContainerComponent\n                ],\n                exports: [ModalBackdropComponent, ModalDirective],\n                entryComponents: [ModalBackdropComponent, ModalContainerComponent]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(ModalModule, { declarations: function () { return [ModalBackdropComponent, ModalDirective, ModalContainerComponent]; }, imports: function () { return [FocusTrapModule]; }, exports: function () { return [ModalBackdropComponent, ModalDirective]; } }); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BsModalRef, BsModalService, MODAL_CONFIG_DEFAULT_OVERRIDE, ModalBackdropComponent, ModalBackdropOptions, ModalContainerComponent, ModalDirective, ModalModule, ModalOptions, CLASS_NAME as ɵa };\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}