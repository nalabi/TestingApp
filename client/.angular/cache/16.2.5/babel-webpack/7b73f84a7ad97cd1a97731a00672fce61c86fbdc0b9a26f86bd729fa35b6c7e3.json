{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, HostListener, ViewChild } from '@angular/core';\nimport { take } from 'rxjs';\nexport let MemberEditComponent = class MemberEditComponent {\n  unloadNotification($event) {\n    if (this.editForm?.dirty) {\n      $event.returnValue = true;\n    }\n  }\n  constructor(accountService, memberService, toastr) {\n    this.accountService = accountService;\n    this.memberService = memberService;\n    this.toastr = toastr;\n    this.accountService.currentUser$.pipe(take(1)).subscribe({\n      next: user => this.user = user\n    });\n  }\n  ngOnInit() {\n    this.loadMember();\n  }\n  loadMember() {\n    if (!this.user) return;\n    this.memberService.getMember(this.user.username).subscribe({\n      next: member => this.member = member\n    });\n  }\n  updateMember() {\n    this.memberService.updateMember(this.editForm?.value).subscribe({\n      next: _ => {\n        this.toastr.success('Profile updated successfully');\n        this.editForm?.reset(this.member);\n      }\n    });\n  }\n};\n__decorate([ViewChild('editForm')], MemberEditComponent.prototype, \"editForm\", void 0);\n__decorate([HostListener('window:beforeunload', ['$event'])], MemberEditComponent.prototype, \"unloadNotification\", null);\nMemberEditComponent = __decorate([Component({\n  selector: 'app-member-edit',\n  templateUrl: './member-edit.component.html',\n  styleUrls: ['./member-edit.component.css']\n})], MemberEditComponent);","map":{"version":3,"names":["Component","HostListener","ViewChild","take","MemberEditComponent","unloadNotification","$event","editForm","dirty","returnValue","constructor","accountService","memberService","toastr","currentUser$","pipe","subscribe","next","user","ngOnInit","loadMember","getMember","username","member","updateMember","value","_","success","reset","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\BongumusaN\\TestingApp\\client\\src\\app\\members\\member-edit\\member-edit.component.ts"],"sourcesContent":["import { Component, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { take } from 'rxjs';\r\nimport { Member } from 'src/app/_models/member';\r\nimport { User } from 'src/app/_models/user';\r\nimport { AccountService } from 'src/app/_services/account.service';\r\nimport { MembersService } from 'src/app/_services/members.service';\r\n\r\n@Component({\r\n  selector: 'app-member-edit',\r\n  templateUrl: './member-edit.component.html',\r\n  styleUrls: ['./member-edit.component.css']\r\n})\r\nexport class MemberEditComponent implements OnInit {\r\n  @ViewChild('editForm') editForm: NgForm | undefined;\r\n  @HostListener('window:beforeunload', ['$event']) unloadNotification($event: any) {\r\n    if (this.editForm?.dirty) {\r\n      $event.returnValue = true;\r\n    }\r\n  }\r\n  member: Member | undefined;\r\n  user: User | null | undefined;\r\n\r\n  constructor(private accountService: AccountService, private memberService: MembersService,\r\n    private toastr: ToastrService) {\r\n\r\n    this.accountService.currentUser$.pipe(take(1)).subscribe({\r\n      next: user => this.user = user\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadMember();\r\n  }\r\n\r\n  loadMember() {\r\n    if (!this.user) return;\r\n    this.memberService.getMember(this.user.username).subscribe({\r\n      next: member => this.member = member\r\n    })\r\n  }\r\n\r\n  updateMember() {\r\n    this.memberService.updateMember(this.editForm?.value).subscribe({\r\n      next: _ => {\r\n        this.toastr.success('Profile updated successfully');\r\n        this.editForm?.reset(this.member);\r\n      }\r\n    })\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,YAAY,EAAUC,SAAS,QAAQ,eAAe;AAG1E,SAASC,IAAI,QAAQ,MAAM;AAWpB,WAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAEmBC,kBAAkBA,CAACC,MAAW;IAC7E,IAAI,IAAI,CAACC,QAAQ,EAAEC,KAAK,EAAE;MACxBF,MAAM,CAACG,WAAW,GAAG,IAAI;;EAE7B;EAIAC,YAAoBC,cAA8B,EAAUC,aAA6B,EAC/EC,MAAqB;IADX,KAAAF,cAAc,GAAdA,cAAc;IAA0B,KAAAC,aAAa,GAAbA,aAAa;IAC/D,KAAAC,MAAM,GAANA,MAAM;IAEd,IAAI,CAACF,cAAc,CAACG,YAAY,CAACC,IAAI,CAACZ,IAAI,CAAC,CAAC,CAAC,CAAC,CAACa,SAAS,CAAC;MACvDC,IAAI,EAAEC,IAAI,IAAI,IAAI,CAACA,IAAI,GAAGA;KAC3B,CAAC;EACJ;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACC,UAAU,EAAE;EACnB;EAEAA,UAAUA,CAAA;IACR,IAAI,CAAC,IAAI,CAACF,IAAI,EAAE;IAChB,IAAI,CAACN,aAAa,CAACS,SAAS,CAAC,IAAI,CAACH,IAAI,CAACI,QAAQ,CAAC,CAACN,SAAS,CAAC;MACzDC,IAAI,EAAEM,MAAM,IAAI,IAAI,CAACA,MAAM,GAAGA;KAC/B,CAAC;EACJ;EAEAC,YAAYA,CAAA;IACV,IAAI,CAACZ,aAAa,CAACY,YAAY,CAAC,IAAI,CAACjB,QAAQ,EAAEkB,KAAK,CAAC,CAACT,SAAS,CAAC;MAC9DC,IAAI,EAAES,CAAC,IAAG;QACR,IAAI,CAACb,MAAM,CAACc,OAAO,CAAC,8BAA8B,CAAC;QACnD,IAAI,CAACpB,QAAQ,EAAEqB,KAAK,CAAC,IAAI,CAACL,MAAM,CAAC;MACnC;KACD,CAAC;EACJ;CACD;AApCwBM,UAAA,EAAtB3B,SAAS,CAAC,UAAU,CAAC,C,oDAA8B;AACH2B,UAAA,EAAhD5B,YAAY,CAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC,CAAC,C,4DAI/C;AANUG,mBAAmB,GAAAyB,UAAA,EAL/B7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,C,EACW5B,mBAAmB,CAqC/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}